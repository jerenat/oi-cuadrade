/*
* OI Cuadrade Window Modal
* Desarrollado por Jeremias Geminiani (c)
* 24/4/2022
*/
"use strict";function setLog(e){if(void 0===e.message)throw new Error("Elije un mensaje");var t=e.message.constructor==String?e.message:e.message.toString();switch(void 0!==e.type||!1!==e.type?e.type:"c_error"){case"warning":console.warn(t);break;case"error":throw new Error(t);case"c_error":console.error(t);break;case"text":console.log(t);break;default:console.error(t)}}class AlertBox{constructor(e){"undefined"!=typeof $?(this.text=e.dialog,this.time=e.time,this.element=e.body,this.type=e.type):setLog({message:'Necesitas el complemento "OI Cuadrade" ',type:"error"})}_setType(e){var t=void 0!==this.type?this.type:"default";if(t.constructor==String)switch(t){case"warning":e.classList.add("warning");break;case"ok":e.classList.add("ok");break;case"error":e.classList.add("error");break;case"visible":e.classList.add("visible");break;case"default":default:e.classList.add("default")}else setLog({message:"Necesita ser formato String!",type:"error"})}setTimeCss(e,t){var s=Math.floor(Math.floor(1e3*this.time)-500);"load"==t&&(e.classList.add("load-js"),window.setTimeout(()=>{e.classList.remove("load-js"),e.classList.add("exit-js")},s))}_Text(e){var t=void 0!==this.text?this.text:"Hello world! The title does not exists.";let s=$().create("span");$(e).app(s),$(s).html(t)}_Time(e,t,s){var i=void 0!==this.time?this.time:5,a=Math.floor(1e3*i),o=0;if(void 0!==this.time){let t=$().create("div",{class:"time-var"});$(e).app(t);let s=$().create("div",{class:"progressBar"});if($(t).app(s),0==o){o=1;var r=s,l=0,n=setInterval(()=>{l>=100?(clearInterval(n),o=0):(l++,r.style.width=l+"%")},10)}}window.setTimeout(()=>{this.setTimeCss(s,"close"),$(t).del(s)},a)}main(){var e=void 0!==this.element?this.element:$d.body;let t=$().create("div",{class:"div-alert"});$(e).app(t),this.setTimeCss(t,"load");let s=$().create("div",{class:"a-sub-alert"});$(t).app(s),this._setType(s),this._Text(s),this._Time(s,e,t)}init(){this.main()}}function OIAlert(e){return new AlertBox(e)}class myModal{constructor(e){"undefined"!=typeof $?void 0!==e?(this.title=e.title,this.function=e.fn,this.logs=void 0!==e.logs&&e.logs,this.version=1,e.hasOwnProperty("style")&&(this.width=e.style.width,this.height=e.style.height,this.fade=e.style.fade,this.move=e.style.move,this.time=e.style.time,this.theme=e.style.theme),this.close=e.onClose):setLog({message:"Error! debes definir un valor",type:"error"}):setLog({message:'Error, necesitas el complemento "OI Cuadrade"',type:"error"})}_detect(){var e,t=navigator.userAgent,s=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(s[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===s[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&s.splice(1,1,e[1]),s.join(" "))}_user(){return!(navigator.userAgent.indexOf("MSIE 5")<0)}_isDef(e){return void 0!==e}_onClose(){if(this._isDef(this.close)){let i=this.close;const a=/((?:(http|https|Http|Https|rtsp|Rtsp):\/\/(?:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,64}(?:\:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,25})?\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\:\d{1,5})?)(\/(?:(?:[a-zA-Z0-9\;\/\?\:\@\&\=\#\~\-\.\+\!\*\'\(\)\,\_])|(?:\%[a-fA-F0-9]{2}))*)?(?:\b|$)/gi;if(i.constructor==String&&a.test(i))href(i);else if(i.constructor==Object){var e=this._isDef(i.dialog)?i.dialog:"No title",t=this._isDef(i.time)?i.time:5,s=this._isDef(i.message)?i.message:"default";new OIAlert({dialog:e,time:t,body:$d.body,type:s}).init()}else setLog({message:"Debe ser enlace o funcion!",type:"error"})}}_title(e){const t=this.title;let s=t.constructor==String||t.constructor==Object?t:t.toString();try{$(e).html(s)}catch(e){setLog({message:e.message,type:"error"})}}_header(e,t){let s=$().create("div",{class:"modal-head"});if($(t).app(s),this._isDef(this.title)){let t=$().create("div",{class:"modal-title"});$(s).app(t);let i=$().create("span");$(t).app(i),this._title(i);let a=$().create("div",{class:"modal-close"});$(s).app(a);let o=$().create("button");$(a).app(o),$(o).on("click",t=>{t.target==o&&$d.body.contains(e)&&$($d.body).del(e),this._isDef(this.close)&&this._onClose()})}else{s.classList.add("nocolor");let t=$().create("div",{class:"modal-close absolut3"});$(s).app(t);let i=$().create("button");$(t).app(i),$(i).on("click",t=>{t.target==i&&$d.body.contains(e)&&$($d.body).del(e),this._isDef(this.close)&&this._onClose()})}if(this._isDef(this.move)&&this.move.constructor==Boolean&&this.move){var i,a=[0,0],o=!1;s.style.cursor="grab",$(s).on("mousedown",e=>{o=!0,a=[t.offsetLeft-e.clientX,t.offsetTop-e.clientY]}),$(s).on("mouseup",()=>{o=!1}),$(s).on("mousemove",e=>{prevent(e),o&&(i={x:e.clientX,y:e.clientY},t.style.left=`${i.x+a[0]}px`,t.style.top=`${i.y+a[1]}px`)})}}_functions(e){const t=this.function;if("function"==typeof t)t(e);else if("string"==typeof t){let s=$().create("div",{class:"string-body"});$(e).app(s);let i=$().create("span");$(s).app(i),$(i).text(t)}else setLog({message:" Necesitar definir algun par√°metro. (La variable 'fn' no puede quedar vacia).",type:"error"})}_width(e){let t=this._isDef(this.width)?this.width:"50%",s=t.constructor==String?t:t.toString(),i=new Array("px","%","em","rem","vw");for(let t=0;t<count(i);t++)s.indexOf(i[t])>-1?e.style.width=s:e.style.width=`${s}px`}_height(e,t){let s=this._isDef(this.height)?this.height:"auto",i=s.constructor==String?s:s.toString(),a=new Array("px","%");i.indexOf(a[0])>-1||i.indexOf(a[1])>-1?e.style.height=i:e.style.height=`${i}px`;let o=e.style.height,r=t.getBoundingClientRect().height;if(o.indexOf("%")>-1){let t=parseInt(window.innerHeight*parseInt(o.replace("%",""))/100);e.style.height=t+"px",t<r&&(e.style.overflowY="scroll")}if(o.indexOf("px")>-1){parseInt(o.replace("px",""))<r&&(e.style.overflowY="scroll")}}_fade(e){if(this._isDef(this.fade))switch(this.fade){case"down":e.style.animationName="init-window-modal",e.style.animationDuration=".2s";break;case"fade":e.style.animationName="fade-window-modal",e.style.animationDuration=".2s";break;case"zig-zag":e.style.animationName="zigzag-window-modal",e.style.animationDuration=".5s";break;case"pong":e.style.animationName="pong-window-modal",e.style.animationDuration=".5s";break;default:e.style.animationName="init-window-modal",e.style.animationDuration=".2s"}}_theme(e){let t=this.theme;if(this._isDef(t))switch(t){case"light":e.classList.add("light");break;case"dark":e.classList.add("dark")}}_subload(e){let t=$().create("div",{class:"preloader"});$(e).app(t),window.setTimeout(()=>{$(e).del(t);let s=$().create("div",{class:"modal-inner"});$(e).app(s),this._functions(s),this._height(e,s)},2e3)}main(){let e=$().create("div",{id:"myModal",class:"modal"});if($($d.body).app(e),this._isDef(this.time)){let t=this.time,s=this.time.constructor==Number?t:parseInt(t.replace(/^[a-zA-Z!@#\$%\^\&*\)\(+=._-]{6,}$/g,"")),i=parseFloat(1e3*s);window.setTimeout(()=>{$d.body.contains(e)&&$($d.body).del(e)},i)}let t=$().create("div",{class:"modal-content"});$(e).app(t),this._fade(t),this._theme(t),this._width(t),this._header(e,t);let s=$().create("div",{class:"modal-body"});$(t).app(s),this._subload(s),void 0!==this.move&&this.move||$(window).on("click",t=>{t.target==e&&$($d.body).del(e)}),$($d).on("keydown",t=>{("key"in(t=t||window.event)?"Escape"===t.key||"Esc"===t.key:27===t.keyCode)&&$d.body.contains(e)&&$($d.body).del(e)})}_preload(){this._user?(this.main(),this.logs&&(setLog({message:`Version de complemento -> ${this.version}`,type:"text"}),setLog({message:`Version de navegador -> ${this._detect()}`,type:"text"}))):setLog({message:"Se necesita un navegador mas moderno!!!",type:"error"})}click(e){e&&$(e).on("click",()=>{this._preload()})}load(){$(window).on("load",()=>{this._preload()})}}var OIModal=e=>new myModal(e);